{"version":3,"file":"BidReceiptGpaBuilder.mjs","sources":["../../../../../src/plugins/auctionHouseModule/gpaBuilders/BidReceiptGpaBuilder.ts"],"sourcesContent":["import { PublicKey } from '@solana/web3.js';\nimport { GpaBuilder } from '@/utils';\n\ntype AccountDiscriminator = [\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number\n];\n// TODO: copied from auction house SDK\n// SDK should either provide a GPA builder or expose this discriminator\nconst bidReceiptDiscriminator: AccountDiscriminator = [\n  186, 150, 141, 135, 59, 122, 39, 99,\n];\n\nconst PUBLIC_KEY_LENGTH = PublicKey.default.toBytes().byteLength;\n\nconst TRADE_STATE = bidReceiptDiscriminator.length;\nconst BOOKKEEPER = TRADE_STATE + PUBLIC_KEY_LENGTH;\nconst AUCTION_HOUSE = BOOKKEEPER + PUBLIC_KEY_LENGTH;\nconst BUYER = AUCTION_HOUSE + PUBLIC_KEY_LENGTH;\nconst METADATA = BUYER + PUBLIC_KEY_LENGTH;\n\nexport class BidReceiptGpaBuilder extends GpaBuilder {\n  whereDiscriminator(discrimator: AccountDiscriminator) {\n    return this.where(0, Buffer.from(discrimator));\n  }\n\n  bidReceiptAccounts() {\n    return this.whereDiscriminator(bidReceiptDiscriminator);\n  }\n\n  whereAuctionHouse(auctionHouseAddress: PublicKey) {\n    return this.bidReceiptAccounts().where(AUCTION_HOUSE, auctionHouseAddress);\n  }\n\n  whereBuyer(buyerAddress: PublicKey) {\n    return this.where(BUYER, buyerAddress);\n  }\n\n  whereMetadata(metadataAddress: PublicKey) {\n    return this.where(METADATA, metadataAddress);\n  }\n}\n"],"names":["bidReceiptDiscriminator","PUBLIC_KEY_LENGTH","PublicKey","default","toBytes","byteLength","TRADE_STATE","length","BOOKKEEPER","AUCTION_HOUSE","BUYER","METADATA","BidReceiptGpaBuilder","GpaBuilder","whereDiscriminator","discrimator","where","Buffer","from","bidReceiptAccounts","whereAuctionHouse","auctionHouseAddress","whereBuyer","buyerAddress","whereMetadata","metadataAddress"],"mappings":";;;AAaA;AACA;AACA,MAAMA,uBAA6C,GAAG,CACpD,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CACpC,CAAA;AAED,MAAMC,iBAAiB,GAAGC,SAAS,CAACC,OAAO,CAACC,OAAO,EAAE,CAACC,UAAU,CAAA;AAEhE,MAAMC,WAAW,GAAGN,uBAAuB,CAACO,MAAM,CAAA;AAClD,MAAMC,UAAU,GAAGF,WAAW,GAAGL,iBAAiB,CAAA;AAClD,MAAMQ,aAAa,GAAGD,UAAU,GAAGP,iBAAiB,CAAA;AACpD,MAAMS,KAAK,GAAGD,aAAa,GAAGR,iBAAiB,CAAA;AAC/C,MAAMU,QAAQ,GAAGD,KAAK,GAAGT,iBAAiB,CAAA;AAEnC,MAAMW,oBAAoB,SAASC,UAAU,CAAC;EACnDC,kBAAkB,CAACC,WAAiC,EAAE;AACpD,IAAA,OAAO,IAAI,CAACC,KAAK,CAAC,CAAC,EAAEC,MAAM,CAACC,IAAI,CAACH,WAAW,CAAC,CAAC,CAAA;AAChD,GAAA;AAEAI,EAAAA,kBAAkB,GAAG;AACnB,IAAA,OAAO,IAAI,CAACL,kBAAkB,CAACd,uBAAuB,CAAC,CAAA;AACzD,GAAA;EAEAoB,iBAAiB,CAACC,mBAA8B,EAAE;IAChD,OAAO,IAAI,CAACF,kBAAkB,EAAE,CAACH,KAAK,CAACP,aAAa,EAAEY,mBAAmB,CAAC,CAAA;AAC5E,GAAA;EAEAC,UAAU,CAACC,YAAuB,EAAE;AAClC,IAAA,OAAO,IAAI,CAACP,KAAK,CAACN,KAAK,EAAEa,YAAY,CAAC,CAAA;AACxC,GAAA;EAEAC,aAAa,CAACC,eAA0B,EAAE;AACxC,IAAA,OAAO,IAAI,CAACT,KAAK,CAACL,QAAQ,EAAEc,eAAe,CAAC,CAAA;AAC9C,GAAA;AACF;;;;"}